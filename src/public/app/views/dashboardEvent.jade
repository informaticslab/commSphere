div(style="background-color:#f2f2f2;" ng-show="contentloaded")
    .modal-content
        .modal-header.header_dark
            .row(style='background-color:#ffffff;')
                .col-lg-12.col-md-12.col-sm-12
                    .event-title-cont
                        h2.h2-create-new(id='myModalLabel')
                            | {{eventdoc.eventName}}
                            .save-draft-cont(style='position:relative; float:right; margin-left:10px; margin-top:0px; margin-right:0px;')
                                button.btn.btn-default.btn-circle2.glyphicon.glyphicon-info-sign(type='button', ng-click='showInfo()' ng-hide="identity.isAuthorized('levelThree')")
                        br
                        .small
                            .p-create-new
                                | Due Date: {{eventdoc.eventDueDate | date:'medium'}}
                            br
                            .p-create-new
                                | Publish Date: {{eventdoc.eventPublishDate | date:'medium'}}
                    .save-draft-cont-evt 
                        button.btn.btn-success(type="button" ng-click="saveCategory('draft')" ng-if='continueNav')
                            | Save Edits
                        button.btn.btn-success(type="button" ng-click="saveCategory('draft')" ng-if='!continueNav')    
                            | Save Edits
                    .submit-btn-cont
                        button.btn.btn-success(type="button" ng-click="saveCategory('completed')" ng-if="identity.isAuthorized('levelThree')")
                            | Submit
                    .submit-btn-cont
                        button.btn.btn-default.pull-right(type="button" ng-click="openPreview('lg',eventdoc)" ng-if="identity.isAuthorized('levelTwo') && readyForPreview")
                            | Preview Report
        .modal-body(style='background-color:#f2f2f2;')
            .row(style='background-color:#f2f2f2; height:100vh;')
                .col-lg-12.col-md-12.col-sm-12
                    .tab-container
                        tabset
                            tab(ng-repeat="category in eventdoc.categories | filter: filterTabForAnalyst" heading="{{category.name}}" select="setActiveCategory(category.name)" active="tabCategory[$index].active")
                                .row
                                    .col-lg-12.col-md-12.col-sm-12
                                        br
                                        .row
                                            .col-lg-9.col-md-9.col-sm-9
                                                .tab-title-heading
                                                    img(src='img/notepad-icon.png', width='37', height='32')
                                                    |   {{category.name}}: by {{category.userAssigned.displayName}}
                                            .col-lg-3.col-md-3.col-sm-3
                                                .return-event-cont
                                                    button.btn.btn-default(style='color:#337ab7;', type="button" ng-click="returnToAnalyst(category)" ng-show="category.statusCompleted && identity.isAuthorized('levelTwo')")
                                                        | Return to analyst
                                        br
                                        hr
                                        br
                                        .row
                                            .col-lg-3.col-md-3.col-sm-3
                                                ul.nav.nav-pills.nav-stacked(style="background-color:#f2f2f2;")
                                                    li(ng-repeat="topic in category.topics" ng-class="{active:activeTab=='tab_'+$index}")
                                                        a(data-target="{{'#tab_'+$index}}" data-toggle="pill"  ng-click="gotoElement('tab_'+$index)" style="cursor:pointer")
                                                            | {{topic.name}}
                                            .col-lg-9.col-md-9.col-sm-9
                                                //div.tab-content
                                                div.tab-pane2(ng-repeat="topic in category.topics" id="{{'tab_'+$index}}" ng-class="{active:activeTab=='tab_'+$index}")
                                                    h3
                                                        | {{topic.name}}
                                                    div(ui-tree='options')
                                                        ul.bullet-disc-nodes(ui-tree-nodes='', ng-model='topic.bullets', data-type='bullet' )
                                                            li.bullet-disc-node(ng-repeat='bullet in topic.bullets', ui-tree-node='' ng-show="hideFromCoordinator(category)" )
                                                                .bullet-title.angular-ui-tree-handle-clear(ng-show='!bullet.editing' ng-mouseenter="hoverBullet = true" ng-mouseleave="hoverBullet = false")
                                                                    a.del-edit-btn.btn.btn-default.btn-xs.pull-right(ng-show="hoverBullet" href='', data-nodrag='', ng-click='removeBullet(topic, bullet)')
                                                                        i.glyphicon.glyphicon-trash
                                                                    a.del-edit-btn.btn.btn-default.btn-xs.pull-right(ng-show="hoverBullet" href='', data-nodrag='', ng-click='editBullet(bullet)')
                                                                        i.glyphicon.glyphicon-pencil
                                                                    p
                                                                        | {{bullet.name}}
                                                                .bullet-title(data-nodrag='', ng-show='bullet.editing')
                                                                    textarea.bulletPlaceHoder(type='text', ng-model='bullet.name' ng-keydown='$event.keyCode==13 ? saveBullet(bullet,$event) : null' ng-blur='saveBullet(bullet,$event)')
                                                                ul.bullet-circle-nodes(ui-tree-nodes='', ng-model='bullet.subBullets', data-type='subBullet')
                                                                    li.bullet-circle-node(ng-repeat='subBullet in bullet.subBullets', ui-tree-node='' ng-show="hideFromCoordinator($index)")
                                                                        .subBullet-title.angular-ui-tree-handle-clear(ng-show='!subBullet.editing' ng-mouseenter="hoverSubBullet = true" ng-mouseleave="hoverSubBullet = false")
                                                                            a.del-edit-btn.btn.btn-default.btn-xs.pull-right(ng-show="hoverSubBullet" href='', data-nodrag='', ng-click='removeSubBullet(bullet, subBullet)')
                                                                                i.glyphicon.glyphicon-trash
                                                                            a.del-edit-btn.btn.btn-default.btn-xs.pull-right(ng-show="hoverSubBullet" href='', data-nodrag='', ng-click='editSubBullet(subBullet)')
                                                                                i.glyphicon.glyphicon-pencil
                                                                            div
                                                                                | &nbsp;&nbsp;{{subBullet.name}}
                                                                        .subBullet-title(data-nodrag='', ng-show='subBullet.editing')
                                                                            textarea.bulletPlaceHoder(type='text', ng-model='subBullet.name' ng-keydown='$event.keyCode==13 ? saveSubBullet(subBullet,$event) : null' ng-blur='saveSubBullet(subBullet,$event)')
                                                                ul.bullet-circle-nodes.angular-ui-tree-nodes(data-nodrag='')
                                                                    li.bullet-circle-node.angular-ui-tree-node
                                                                        textarea.bulletPlaceHoder(type='text', ng-model='bullet.newSubBulletName', placeholder='Add sub-bullet. (Hit enter to add next sub-bullet)' ng-keydown='$event.keyCode==13 ? addSubBullet(bullet,$event) : null' ng-blur='addSubBullet(bullet,$event)')
                                                        ul.angular-ui-tree-nodes.bullet-disc-nodes(data-nodrag='')
                                                            li.angular-ui-tree-node(ng-hide="hideFromCoordinator(category)")
                                                                div.awaiting
                                                                    | Awaiting information from analyst
                                                            li.angular-ui-tree-node.bullet-disc-node(ng-show="hideFromCoordinator(category)")
                                                                textarea.bulletPlaceHoder(type='text', ng-model='topic.newBulletName', placeholder='Add bullet. (Hit enter to add next bullet)' ng-keydown='$event.keyCode==13 ? addBullet(topic,$event) : null' ng-blur='addBullet(topic,$event)')
                                                    div(ng-repeat="subTopic in topic.subTopics")
                                                        h4
                                                            | {{subTopic.name}}
                                                        div(ui-tree='options')
                                                            ul.bullet-disc-nodes(ui-tree-nodes='', ng-model='subTopic.bullets', data-type='bullet' )
                                                                li.bullet-disc-node(ng-repeat='bullet in subTopic.bullets', ui-tree-node='' ng-show="hideFromCoordinator(category)" )
                                                                    .bullet-title.angular-ui-tree-handle-clear(ng-show='!bullet.editing' ng-mouseenter="hoverBullet = true" ng-mouseleave="hoverBullet = false")
                                                                        a.del-edit-btn.btn.btn-default.btn-xs.pull-right(ng-show="hoverBullet" href='', data-nodrag='', ng-click='removeBullet(subTopic, bullet)')
                                                                            i.glyphicon.glyphicon-trash
                                                                        a.del-edit-btn.btn.btn-default.btn-xs.pull-right(ng-show="hoverBullet" href='', data-nodrag='', ng-click='editBullet(bullet)')
                                                                            i.glyphicon.glyphicon-pencil
                                                                        p
                                                                            | {{bullet.name}}
                                                                    .bullet-title(data-nodrag='', ng-show='bullet.editing')
                                                                        textarea.bulletPlaceHoder(type='text', ng-model='bullet.name' ng-keydown='$event.keyCode==13 ? saveBullet(bullet,$event) : null' ng-blur='saveBullet(bullet,$event)')
                                                                    ul.bullet-circle-nodes(ui-tree-nodes='', ng-model='bullet.subBullets', data-type='subBullet')
                                                                        li.bullet-circle-node(ng-repeat='subBullet in bullet.subBullets', ui-tree-node='' ng-show="hideFromCoordinator($index)")
                                                                            .subBullet-title.angular-ui-tree-handle-clear(ng-show='!subBullet.editing' ng-mouseenter="hoverSubBullet = true" ng-mouseleave="hoverSubBullet = false")
                                                                                a.del-edit-btn.btn.btn-default.btn-xs.pull-right(ng-show="hoverSubBullet" href='', data-nodrag='', ng-click='removeSubBullet(bullet, subBullet)')
                                                                                    i.glyphicon.glyphicon-trash
                                                                                a.del-edit-btn.btn.btn-default.btn-xs.pull-right(ng-show="hoverSubBullet" href='', data-nodrag='', ng-click='editSubBullet(subBullet)')
                                                                                    i.glyphicon.glyphicon-pencil
                                                                                div
                                                                                    | &nbsp;&nbsp;{{subBullet.name}}
                                                                            .subBullet-title(data-nodrag='', ng-show='subBullet.editing')
                                                                                textarea.bulletPlaceHoder(type='text', ng-model='subBullet.name' ng-keydown='$event.keyCode==13 ? saveSubBullet(subBullet,$event) : null' ng-blur='saveSubBullet(subBullet,$event)')
                                                                    ul.bullet-circle-nodes.angular-ui-tree-nodes(data-nodrag='')
                                                                        li.bullet-circle-node.angular-ui-tree-node
                                                                            textarea.bulletPlaceHoder(type='text', ng-model='bullet.newSubBulletName', placeholder='Add sub-bullet. (Hit enter to add next sub-bullet)' ng-keydown='$event.keyCode==13 ? addSubBullet(bullet,$event) : null' ng-blur='addSubBullet(bullet,$event)')
                                                            ul.angular-ui-tree-nodes.bullet-disc-nodes(data-nodrag='')
                                                                li.angular-ui-tree-node(ng-hide="hideFromCoordinator(category)")
                                                                    div.awaiting
                                                                        | Awaiting information from analyst
                                                                li.angular-ui-tree-node.bullet-disc-node(ng-show="hideFromCoordinator(category)")
                                                                    textarea.bulletPlaceHoder(type='text', ng-model='subTopic.newBulletName', placeholder='Add bullet. (Hit enter to add next bullet)' ng-keydown='$event.keyCode==13 ? addBullet(subTopic,$event) : null' ng-blur='addBullet(subTopic,$event)')
                                                    br
                                                    br                        
                                //- .row
                                //-     .col-lg-6
                                //-             h3 Data binding
                                //-             .info
                                //-                 | {{  }}
                                //-             pre.code.
                                //-                 {{ eventdoc | json }}   
                            tab(heading="Data" select="tabShown = !tabShown" deselect="tabShown = !tabShown")
                                .row
                                    .col-lg-12.col-md-12.col-sm-12(style='padding-left:35px; padding-right:35px; padding-bottom:15px;')
                                        br
                                        .row
                                            .col-lg-9.col-md-9.col-sm-9
                                                .tab-title-heading
                                                    img(src='img/web-icon.png', width='37', height='32')
                                                    |   Data
                                        br
                                        hr
                                        br
                                        .row
                                            button#button_add.btn.btn-default(ng-click='addColumn()', style='color:#337ab7;') Add Column to the End
                                            button#button_remove.btn.btn-default(ng-click='remove()', style='color:#337ab7;') Remove Last Column
                                            button#addData.btn.btn-default(type='button', ng-click='addRow()', style='color:#337ab7;') Add Row
                                            br
                                            br
                                            br
                                            .grid(ng-if="tabShown" ui-grid="{data: eventData2.dailyData, columnDefs : columns}", ui-grid-edit,ui-grid-cellNav,ui-grid-row-edit) 
                             //tab(heading="Data2" select="setActiveCategory('Data2')")
                                 .row
                                    .col-lg-12.col-md-12.col-sm-12
                                        br
                                        .row
                                            .col-lg-9.col-md-9.col-sm-9
                                                 .tab-title-heading
                                                    img(src='img/web-icon.png', width='37', height='32')
                                        .row
                                            .col-lg-3.col-md-3.col-sm-3
                                                ul.nav.nav-pills.nav-stacked(style="background-color:#f2f2f2;")
                                                    li(ng-repeat="topic in eventData.topics" ng-class="{active:activeTab=='tab_'+$index}")
                                                        a(data-target="{{'#tab_'+$index}}" data-toggle="pill"  ng-click="gotoElement('tab_'+$index)" style="cursor:pointer")
                                                            | {{topic.name}}
                                            .col-lg-9.col-md-9.col-sm-9
                                                //div.tab-content
                                                div(ng-repeat="topic in eventData.topics" id="{{'tab_'+$index}}" ng-class="{active:activeTab=='tab_'+$index}")
                                                        |{{topic.name}}
                                                        .grid(ui-grid="{data: topic.subTopics, enableCellEditOnFocus: true , columnDefs: columnsLayout} ", ui-grid-edit,ui-grid-cellNav)  
            //.row
                .col-lg-6
                        h3 Data binding
                        .info
                            | {{  }}
                        pre.code.
                            {{ eventdoc | json }}   
                                          
            .clear-divs


            

                            
                        